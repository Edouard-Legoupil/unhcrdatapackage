<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Building a Chart Race for Refugees • unhcrdatapackage</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Building a Chart Race for Refugees">
<meta property="og:description" content="unhcrdatapackage">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">unhcrdatapackage</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/BumpChart.html">Bump charts</a>
    </li>
    <li>
      <a href="../articles/Exploration.html">Initial Exploration of Refugee Statistics</a>
    </li>
    <li>
      <a href="../articles/chartRace.html">Building a Chart Race for Refugees</a>
    </li>
    <li>
      <a href="../articles/pyramid.html">Analysis of Refugees Age Pyramid</a>
    </li>
    <li>
      <a href="../articles/region-comparison.html">Refugee Population Region Comparison</a>
    </li>
    <li>
      <a href="../articles/regional-exploration.html">An overview of population of concerns in the Americas</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/unhcr/unhcrdatapackage/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="chartRace_files/header-attrs-2.10/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Building a Chart Race for Refugees</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/unhcr/unhcrdatapackage/blob/master/vignettes/chartRace.Rmd"><code>vignettes/chartRace.Rmd</code></a></small>
      <div class="hidden name"><code>chartRace.Rmd</code></div>

    </div>

    
    
<p>Note that you can find the source code for all the chart below in the <a href="https://github.com/unhcr/unhcrdatapackage/tree/master/vignettes">Repository</a>.</p>
<p>“Bar Chart Race” are a specific type of bar chart that moves to show rankings over time. It became recently a quite popular approach to bring a storytelling elements within a longitudinal dataset. Readers are suggested to connect and combine what they see on the chart with other qualitative elements that they know about (elements of history). By using the allegory of F1 Race, it gives a very dynamic visualisation dimension.</p>
<p>With R, it’s fairly easy to reproduce such visualization - We will show here how to use <code>gganimate</code> R packages to display evolution of refugees &amp; IDP’s number over time based on UNHCR statistics</p>
<p>The visualization below uses data from UNHCR and data.worldbank API</p>
<div id="top-countries-for-each-statistical-categories" class="section level1">
<h1 class="hasAnchor">
<a href="#top-countries-for-each-statistical-categories" class="anchor"></a>Top Countries for each statistical categories</h1>
<p>UNHCR’s populations of concern status includes:</p>
<ul>
<li><p><strong>Refugees (REF)</strong> include individuals recognized under the 1951 Convention relating to the Status of Refugees; its 1967 Protocol; the 1969 OAU Convention Governing the Specific Aspects of Refugee Problems in Africa; those recognised in accordance with the UNHCR Statute; individuals granted complementary forms of protection; or those enjoying temporary protection. Since 2007, the refugee population also includes people in a refugee-like situation.</p></li>
<li><p><strong>Asylum-seekers (ASY)</strong> are individuals who have sought international protection and whose claims for refugee status have not yet been determined, irrespective of when they may have been lodged.</p></li>
<li><p><strong>Internally displaced persons (IDP)</strong> are people or groups of individuals who have been forced to leave their homes or places of habitual residence, in particular as a result of, or in order to avoid the effects of armed conflict, situations of generalised violence, violations of human rights, or natural or man-made disasters, and who have not crossed an international border. For the purposes of UNHCR’s statistics, this population only includes conflict-generated IDPs to whom the Office extends protection and/or assistance. Since 2007, the IDP population also includes people in an IDP-like situation. For global IDP estimates, see www.internal-displacement.org.</p></li>
<li><p><strong>Stateless persons (STA)</strong> are defined under international law as persons who are not considered as nationals by any State under the operation of its law. In other words, they do not possess the nationality of any State. UNHCR statistics refer to persons who fall under the agency’s statelessness mandate because they are stateless according to this international definition, but data from some countries may also include persons with undetermined nationality.</p></li>
<li><p><strong>Others of concern (OOC)</strong> refers to individuals who do not necessarily fall directly into any of the groups above, but to whom UNHCR extends its protection and/or assistance services, based on humanitarian or other special grounds.</p></li>
<li><p><strong>Venezuelan Displaced Abroad (VDA)</strong>: People displaced across borders: According to interviews and protection monitoring exercises conducted by UNHCR and partners, Venezuelans claim that they are leaving the country for a variety of reasons, including persecution on account of their individual profiles, insecurity and violence, lack of access to food, medicine and essential services, as well as loss of income as a result of the current human rights, political and socioeconomic situation in Venezuela. Based on these reports, as well as reliable information in the public domain from a wide range of sources about the situation in Venezuela, UNHCR considers that for a number of profiles, international protection considerations are likely to arise under the 1951 Convention/1967 Protocol relating to the Status of Refugees depending on the circumstances of the individual case. While individual circumstances and reasons for departure from Venezuela vary, UNHCR considers that the majority of Venezuelan nationals, or stateless persons who were habitually resident in Venezuela, are in need of international protection under the criteria contained in the Cartagena Declaration on the basis of threats to their lives, security or freedom resulting from the events that are currently seriously disturbing public order in Venezuela.</p></li>
</ul>
<p><img src="chartRace_files/figure-html/chart2017facet2-1.png" width="700"></p>
</div>
<div id="visualising-evolution-of-refugee-population-over-time-" class="section level1">
<h1 class="hasAnchor">
<a href="#visualising-evolution-of-refugee-population-over-time-" class="anchor"></a>Visualising evolution of refugee population over time.</h1>
<div id="by-country-of-asylum" class="section level2">
<h2 class="hasAnchor">
<a href="#by-country-of-asylum" class="anchor"></a>By Country of Asylum</h2>
<p><img src="chartRace_files/figure-html/barchartrace%20-1.gif"><!-- --></p>
</div>
<div id="by-country-of-origin" class="section level2">
<h2 class="hasAnchor">
<a href="#by-country-of-origin" class="anchor"></a>By Country of Origin</h2>
</div>
</div>
<div id="visualising-evoluation-of-idps-population-over-time-" class="section level1">
<h1 class="hasAnchor">
<a href="#visualising-evoluation-of-idps-population-over-time-" class="anchor"></a>Visualising evoluation of IDPs population over time.</h1>
<p><img src="chartRace_files/figure-html/barchartrace2%20-1.gif"><!-- --></p>
</div>
<div id="how-many-refugees-in-relation-with-the-size-of-host-population" class="section level1">
<h1 class="hasAnchor">
<a href="#how-many-refugees-in-relation-with-the-size-of-host-population" class="anchor"></a>How many refugees in relation with the size of host population?</h1>
<p><img src="chartRace_files/figure-html/barchartrace31%20-1.gif"><!-- --></p>
</div>
<div id="how-many-refugees-in-relation-with-the-wealth-of-host-population" class="section level1">
<h1 class="hasAnchor">
<a href="#how-many-refugees-in-relation-with-the-wealth-of-host-population" class="anchor"></a>How many refugees in relation with the wealth of host population?</h1>
<p><img src="chartRace_files/figure-html/barchartrace4%20-1.gif"><!-- --></p>
</div>
<div id="how-many-idps-in-relation-with-the-wealth-of-host-population" class="section level1">
<h1 class="hasAnchor">
<a href="#how-many-idps-in-relation-with-the-wealth-of-host-population" class="anchor"></a>How many IDPs in relation with the wealth of host population?</h1>
<p><img src="chartRace_files/figure-html/barchartrace41%20-1.gif"><!-- --></p>
<div id="annexes" class="section level2">
<h2 class="hasAnchor">
<a href="#annexes" class="anchor"></a>Annexes</h2>
<p>For animation, the main challenge is to tune parameters.</p>
<ul>
<li>use geom_tile, not geom_bar as this allows for better transitions within gganimate</li>
<li>gganimate functions transition_time and ease_aes handle the animation and transition between bars. The settings here worked well for my purposes, but dig into these functions to get an overview of different options</li>
<li>nframes and fps parameters to the animate function control the speed of transitions. One mistake I made here initially was to set nframes equal to the number of years in the dataset. This works, but because there is only 1 frame per year, you don’t get the smooth transitions that I wanted in this graph. Increasing the number of frames fixed that issue.</li>
</ul>
<p>nframes : The number of frames to render (default 100)</p>
<p>fps : The framerate of the animation in frames/sec (default 10)</p>
<p>and animate…. the bar chart race…</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Edouard Legoupil.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
