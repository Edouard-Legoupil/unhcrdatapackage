---
title:
output: 
  html_document: 
    theme: yeti
    includes:
      before_body: header.html
      after_body: footer.html
---
 

```{r, include = FALSE}
knitr::opts_chunk$set(
  comment = "#>",
  message=FALSE, 
  warning=FALSE,
  echo = FALSE
)

library(tidyverse)
## Loading the stat tables
end_year_population_totals <- unhcrdatapackage::end_year_population_totals
reference <- unhcrdatapackage::reference
end_year_population_totals_long <- unhcrdatapackage::end_year_population_totals_long
end_year_population_totals_long.asy <- dplyr::left_join( x= unhcrdatapackage::end_year_population_totals_long, 
                                                     y= unhcrdatapackage::reference, 
                                                     by = c("CountryAsylumCode" = "iso_3"))

end_year_population_totals_long.ori <- dplyr::left_join( x= unhcrdatapackage::end_year_population_totals_long, 
                                                     y= unhcrdatapackage::reference, 
                                                     by = c("CountryOriginCode" = "iso_3"))

demographics <- unhcrdatapackage::demographics
asylum_applications <- unhcrdatapackage::asylum_applications
asylum_decisions <- unhcrdatapackage::asylum_decisions
asylum_decisions_long <- unhcrdatapackage::asylum_decisions_long

solutions_long.asy <- dplyr::left_join( x=  unhcrdatapackage::solutions_long, 
                                                     y= unhcrdatapackage::reference, 
                                                     by = c("CountryAsylumCode" = "iso_3"))

selectedctr <- data <- dplyr::left_join( x= unhcrdatapackage::end_year_population_totals_long, 
                                                     y= unhcrdatapackage::reference, 
                                                     by = c("CountryAsylumCode" = "iso_3"))  %>%
  filter( Year == 2021) %>%
  group_by( UNHCRBureau, SUBREGION, CountryAsylumName) %>%
  summarise(Value2 = sum(Value) ) %>%
 filter( Value2 > 50000) 
```

## Forcible Displacement Statistics{.tabset .tabset-pills}

### Intro
<div class="container">
<div class="jumbotron">
<h1 class="title"><span style="color: #0072BC;">__Seven Key Questions__</span></h1>

>  addressed through predefined crafted <span style="color: #0072BC;">__static charts__</span>

</div>
</div> 

  1. How the different __Categories__ of Forcibly Displaced People are evolving over time? 
 
  2. What are the main Countries of __Origin__ of population in need of international protection 
 
  3. What are the __Demographics__ profiles of Forcibly Displaced People in relation with the host population? 
 
  4. What are the trends in term of __Solutions__ in this  Country? 
 
  5. How is the asylum __Processing__ capacity in relation with the demand? 
 

  6. What is the share of in need person of international protection versus regular __Migration__? 
  
  7. If happening, what is the evolution of a country as a displacement __Source__? 

***
Charts can easily be copied as an image as is, or adjusted using a [reproducible source code in R statistical language](https://unhcr-americas.github.io/reproducibility). 

For instance, you can change the title from a _key question_ to a _key message_ or [add annotations](http://www.sthda.com/english/wiki/ggplot2-texts-add-text-annotations-to-a-graph-in-r-software) to __support data storytelling__.

***
The resulting charts can be embedded in reports, fact-sheets, social media or presentations to accompany a narrative / campaign. More information on Forcible Displacement Statistic is available with [UNHCR here](https://www.unhcr.org/refugee-statistics/insights/explainers/forcibly-displaced-pocs.html) and through International Statistical Recommendations on [refugee / asylum seekers](https://unstats.un.org/unsd/demographic-social/Standards-and-Methods/files/Principles_and_Recommendations/International-Migration/2018_1746_EN_08-E.pdf) and [Internally Displaced People](https://www.unhcr.org/statistics/unhcrstats/600188974/international-recommendations-internally-displaced-persons-statistics-iris.html)  

### World{.tabset }
 
```{r message=FALSE, warning=FALSE, output= FALSE}
lastyear <- 2021

thisbureau <- "Americas"
thiscountry <- "Canada"
``` 


```{r , child = 'WorldChild.Rmd'}

```

### America{.tabset .tabset-pills}


#### Regional Overview{.tabset}

```{r message=FALSE, warning=FALSE, output= FALSE}
thisbureau <- "Americas"
ctr <- selectedctr  %>%
  filter( UNHCRBureau == thisbureau) %>%
  select(CountryAsylumName)
# as.character(ctr$CountryAsylumName)
 
#  [1] "Dominican Republic"                 "Costa Rica"                        
#  [3] "El Salvador"                        "Guatemala"                         
#  [5] "Honduras"                           "Mexico"                            
#  [7] "Panama"                             "Canada"                            
#  [9] "United States of America"           "Argentina"                         
# [11] "Brazil"                             "Chile"                             
# [13] "Colombia"                           "Ecuador"                           
# [15] "Peru"                               "Venezuela (Bolivarian Republic of)"
``` 
 

```{r , child = 'RegionChild.Rmd'}
```

#### Northern America{.tabset .tabset-pills}

##### Canada{.tabset  }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Canada"
```


```{r , child = 'CountryChildl1.Rmd'}
```


##### USA{.tabset  }

```{r message=FALSE, warning=FALSE}
thiscountry <- "United States of America"
```


```{r , child = 'CountryChildl1.Rmd'}
```



#### Meso America{.tabset .tabset-pills}

##### Mexico{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Mexico"
```

```{r , child = 'CountryChildl1.Rmd'}
```

##### Guatemala{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Guatemala"
```

```{r , child = 'CountryChildl1.Rmd'}
```


##### El Salvador{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "El Salvador"
```

```{r , child = 'CountryChildl1.Rmd'}
```


##### Honduras{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Honduras"
```

```{r , child = 'CountryChildl1.Rmd'}
```

##### Costa Rica{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Costa Rica"
```

```{r , child = 'CountryChildl1.Rmd'}
```


##### Panama{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Panama"
```

```{r , child = 'CountryChildl1.Rmd'}
```


#### Caribean{.tabset .tabset-pills}


##### Dominican Republic{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Dominican Republic"
```

```{r , child = 'CountryChildl1.Rmd'}
```


#### Southern America{.tabset .tabset-pills}

##### Argentina{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Argentina"
```

```{r , child = 'CountryChildl1.Rmd'}
```

##### Brazil{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Brazil"
```


```{r , child = 'CountryChildl1.Rmd'}
```




##### Chile{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Chile"
```


```{r , child = 'CountryChildl1.Rmd'}
```



##### Colombia{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Colombia"
```


```{r , child = 'CountryChildl1.Rmd'}
```


##### Ecuador{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Ecuador"
```


```{r , child = 'CountryChildl1.Rmd'}
```



##### Peru{.tabset }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Peru"
```


```{r , child = 'CountryChildl1.Rmd'}
```



##### Venezuela{.tabset  }

```{r message=FALSE, warning=FALSE}
thiscountry <- "Venezuela (Bolivarian Republic of)"
```

```{r , child = 'CountryChildl1.Rmd'}
```



    

## {-}