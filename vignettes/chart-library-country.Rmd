---
title: "Chart Library Country"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{chart-library-country}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(unhcrdatapackage)
```

<!-- WARNING - This vignette is generated by {fusen} from /dev/dev_plot_Country.Rmd: do not edit by hand -->

Below is the library with all Country Focused questions organised around the 7 key questions! 


# 1. Category

## Key Figures

    

  

```{r example-plot_ctr_keyfig}
plot_ctr_keyfig(year = 2022,
                country_asylum_iso3c = "COL")
```

  

  


## Plot Tree Map of Categories

    

```{r examples-plot_ctr_treemap, fig.retina = 2, fig.width = 8, fig.asp = 0.618, fig.align = "center", dev = "ragg_png", out.width = "90%"}
# 
plot_ctr_treemap(year = 2021,
                            country_asylum_iso3c = "USA",
                            pop_type = c("REF", "ASY")
         )

```

    




## Plot Population type per year

<!--
Create a chunk for the core of the function

- The chunk needs to be named `function` at least
- It contains the code of a documented function
- The chunk can also be named `function-my_median` to make it easily
findable in your Rmd
- Let the `@examples` part empty, and use the next `examples` chunk instead to present reproducible examples

After inflating the template

-  This function code will automatically be added in a new file in the "R/" directory
-->


<!--
Create a chunk with an example of use for your function

- The chunk needs to be named `examples` at least
- It contains working examples of your function
- The chunk is better be named `examples-my_median` to be handled
correctly when inflated as a vignette

After inflating the template

-  This example will automatically be added in the '@examples' part of our function above in the "R/" directory
- This example will automatically be added in the vignette created from this Rmd template
-->


```{r examples-plot_ctr_population_type_per_year, fig.retina = 2, fig.width = 8, fig.asp = 0.618, fig.align = "center", dev = "ragg_png", out.width = "90%"}

p <- plot_ctr_population_type_per_year(
                         year = 2022,
                         country_asylum_iso3c = "PAN",
                         lag = 5,
                         pop_type = c("REF", 
                                       "ASY", 
                                       "OIP", 
                                       "OOC",
                                       "STA",
                                       "IDP" )
                  )
p
## Raw data can always be accessed with 
#knitr::kable(ggplot2::ggplot_build(p)$plot$data )
```

<!--
Create a chunk with a test of use for your function

- The chunk needs to be named `tests` at least
- It contains working tests of your function
- The chunk is better be named `tests-my_median` to be handled
correctly when inflated as a vignette

After inflating the template

-  This test code will automatically be added in the "tests/testthat/" directory
-->


# 2. Origin

## Plot Main country of origin  in one specific country - Absolute value

```{r examples-plot_ctr_population_type_abs, fig.retina = 2, fig.width = 8, fig.asp = 0.618, fig.align = "center", dev = "ragg_png", out.width = "90%"}
plot_ctr_population_type_abs(year = 2020,
                    country_asylum_iso3c = "USA",
                    top_n_countries = 4,
                    pop_type = "REF",
                    show_diff_label = FALSE
                    ) 

## Same with 9 top countries and asylum seekers included
plot_ctr_population_type_abs(year = 2020,
                    country_asylum_iso3c = "USA",
                    top_n_countries = 9,
                    pop_type = "ASY",
                    show_diff_label = TRUE
                    ) 

```

## Plot Main country of origin in one specific country - Percentage

```{r examples-plot_ctr_population_type_perc, fig.retina = 2, fig.width = 8, fig.asp = 0.618, fig.align = "center", dev = "ragg_png", out.width = "90%"}

plot_ctr_population_type_perc(year = 2021,
                    country_asylum_iso3c = "BRA",
                    top_n_countries = 9,
                    pop_type = "REF"  ) 

plot_ctr_population_type_perc(year = 2021,
                    country_asylum_iso3c = "BRA",
                    top_n_countries = 9,
                    pop_type = "ASY"  ) 
```

## Plot Increases and Decreases in Population Groups

```{r examples-plot_ctr_diff_in_pop_groups, fig.retina = 2, fig.width = 8, fig.asp = 0.618, fig.align = "center", dev = "ragg_png", out.width = "90%"}
# 
plot_ctr_diff_in_pop_groups(year = 2022,
                            country_asylum_iso3c = "ARG",
                            pop_type = c("REF", "ASY")
         )

```

## Plot Origin History

    

  

```{r example-plot_ctr_origin_history}
plot_ctr_origin_history(year = 2022,
                        lag = 5,
                        country_asylum_iso3c = "MEX",
                          pop_type = c("REF", 
                                       "ASY", 
                                       "OIP", 
                                       "IDP" ),
                        otherprop = .02)
```

  

  

# 3. Destination

## Plot Main Destination from  one specific country 

```{r examples-plot_ctr_destination, fig.retina = 2, fig.width = 8, fig.asp = 0.618, fig.align = "center", dev = "ragg_png", out.width = "90%"}
# 
plot_ctr_destination(year = 2021,
                     country_origin_iso3c = "COL",
                     pop_type = c("REF", "ASY")
         )

```

    


## plot recognition rate for a nationality

    

  

```{r example-plot_ctr_origin_recognition}
plot_ctr_origin_recognition(year = 2022,
                     country_origin_iso3c = "VEN",
                     top_n_countries = 10, 
                     measure = "RefugeeRecognitionRate",
                     order_by = "TotalDecided" )
```

  

# 4. Profile

## Plot Age Pyramid

    

```{r examples-plot_ctr_pyramid, fig.retina = 2, fig.width = 8, fig.asp = 0.618, fig.align = "center", dev = "ragg_png", out.width = "90%"}
# 
plot_ctr_pyramid(year = 2022,
                 country_asylum_iso3c = "COL",
                 pop_type = c("ASY", "REF")
                 )

```

## Plot locations within countries

  

```{r example-plot_ctr_location}
plot_ctr_location(year = 2022,
                 country_asylum_iso3c = "COL",
                 pop_type = c("ASY", "REF", "OIP"))

plot_ctr_location(year = 2021,
                 country_asylum_iso3c = "COL",
                 pop_type = c("IDP"))

plot_ctr_location(year = 2022,
                 country_asylum_iso3c = "CAN",
                 pop_type = c("ASY", "REF", "OIP"))

plot_ctr_location(year = 2021,
                 country_asylum_iso3c = "MEX",
                 pop_type = c("ASY", "REF", "OIP"))
```

  

  


# 5. Processing

    

## Plot Refugee Recognition rate in Country

    

  

```{r example-plot_ctr_recognition}
plot_ctr_recognition(year = 2022,
                     country_asylum_iso3c = "USA",
                     top_n_countries = 10, 
                     measure = "RefugeeRecognitionRate",
                     order_by = "TotalDecided" )
```

  

  
    

## Asylum Applications & Decision over time

  

```{r example-plot_ctr_asylum}
plot_ctr_asylum(year = 2022,
                country_asylum_iso3c = "ECU", 
                            lag = 10)
```

  

  


## Asylum Processing

    

  

```{r example-plot_ctr_process}
plot_ctr_process(year = 2022,   country_asylum_iso3c = "BOL")

plot_ctr_process(year = 2022,   country_asylum_iso3c = "CHL")


plot_ctr_process(year = 2022,   country_asylum_iso3c = "USA",
                              otherprop = .02)

plot_ctr_process(year = 2022,   country_asylum_iso3c = "USA",
                              otherprop = .04)


```

  

    
    

## Average Asylum Processing Time

    

  

```{r example-plot_ctr_processing_time}
plot_ctr_processing_time(year = 2022,
                         country_asylum_iso3c = "ARG")


plot_ctr_processing_time(year = 2022,
                         country_asylum_iso3c = "USA")

## Display a filtered version of the chart for a specific country and procedure
plot_ctr_processing_time(year = 2022,
                         country_asylum_iso3c = "EGY",
                         country_origin_iso3c = "ERI",
                         procedureType = "U")

```

  

 
 

# 6. Solutions 

## Plot Solution Over time 

    

  

```{r example-plot_ctr_solution}
plot_ctr_solution(year = 2021,
                  country_asylum_iso3c= "UGA",
                  pop_type = c("REF", "ASY"))
```

  

  


# 7.Migrant 

## plot share displaced / migrant for world - region - subregion

bar with share


## Plot  share displaced / migrant for top countries

    
dumbel


    

## Plot Ratio Refugee Migrant

    

  

```{r example-plot_ctr_disp_migrant}
plot_ctr_disp_migrant(year = 2022,
                    country_asylum_iso3c = "MEX" )
# plot_ctr_disp_migrant(year = 2022,
#                     country_asylum_iso3c = "FRA" )
```

  

  


    
--- 




# Refresh package

